# Weltenwind Log Rotation Configuration
# Pfad: /etc/logrotate.d/weltenwind

/var/log/weltenwind/*.log {
    # TÃ¤glich rotieren
    daily
    
    # 30 Tage aufbewahren (7 x daily)
    rotate 7
    
    # Komprimieren nach der Rotation
    compress
    delaycompress
    
    # Nicht rotieren wenn leer
    notifempty
    
    # Log-Datei nach Rotation neu erstellen
    create 0644 weltenwind weltenwind
    
    # Verfehlende Dateien ignorieren
    missing_ok
    
    # Nach der Rotation systemd-Service neu laden (optional)
    postrotate
        /bin/systemctl reload-or-restart weltenwind-backend.service > /dev/null 2>&1 || true
    endscript
}
/var/log/weltenwind/nginx.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 0644 weltenwind weltenwind
    postrotate
        if systemctl is-active weltenwind-nginx >/dev/null; then
            systemctl reload weltenwind-nginx
        fi
    endscript
}

/var/log/weltenwind/nginx.error.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 0644 weltenwind weltenwind
    postrotate
        if systemctl is-active weltenwind-nginx >/dev/null; then
            systemctl reload weltenwind-nginx
        fi
    endscript
}
